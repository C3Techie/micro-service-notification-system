api-gateway:
  build: ./api-gateway
  ports:
    - "8000:8000"
  environment:
    RABBITMQ_URL: amqp://guest:guest@rabbitmq:5672
    NODE_ENV: development
  depends_on:
    - rabbitmq
  volumes:
    - ./api-gateway:/app
    - /app/node_modules
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8000/api/v1/notifications/health"]
    interval: 30s
    timeout: 10s
    retries: 3